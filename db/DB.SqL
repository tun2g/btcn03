DROP TABLE IF EXISTS "CASTS_OF_MOVIES";
DROP TABLE IF EXISTS "REVIEWS";
DROP TABLE IF EXISTS "MOVIES";
CREATE TABLE "MOVIES" (
  "ID" VARCHAR(50) NOT NULL,
  "IMG" VARCHAR NOT NULL,
  "TITLE" VARCHAR(100) NOT NULL,
	"YEAR" INT NOT NULL,
	"TOPRANK" INT NOT NULL,
	"RATIING" NUMERIC(19,4) NOT NULL,
	"RATINGCOUNT" NUMERIC(19,4) NOT NULL,
	"GENRES" TEXT, 
	"SYNOPSES" TEXT
)
;
DROP TABLE IF EXISTS "CASTS";
CREATE TABLE "CASTS" (
  "ID" VARCHAR(50) NOT NULL,
  "IMG" VARCHAR,
  "LEGACYNAMETEXT" VARCHAR(50),
	"NAME" VARCHAR(50) ,
	"BIRTHDATE" VARCHAR(30) ,
	"BIRTHPLACE" TEXT ,
	"GENDER" VARCHAR(10) NOT NULL, 
	"HEIGHTCENTIMETERS" NUMERIC(19,4),
	"NICKNAMES" TEXT,
	"REALNAME" VARCHAR(50) 
)
;
DROP TABLE IF EXISTS "CASTS_OF_MOVIES";
CREATE TABLE "CASTS_OF_MOVIES" (
  "IDMOVIE" VARCHAR(50) NOT NULL,
	"IDCAST" VARCHAR(50) NOT NULL
)
;

DROP TABLE IF EXISTS "REVIEWS";
CREATE TABLE "REVIEWS" (
  "IDMOVIE" VARCHAR(50) NOT NULL,
	"AUTHOR" VARCHAR(50) NOT NULL,
	"AUTHORRATING" INT,
	"HELPFULNESSSCORE" NUMERIC(19,4) NOT NULL,
	"INTERESTINGVOTES" TEXT NOT NULL,
	"LANGUAGECODE" VARCHAR(10) NOT NULL,
	"REVIEWTEXT" TEXT NOT NULL,
	"REVIEWTITLE" TEXT NOT NULL,
	"SUBMISSIONDATE" VARCHAR(30) NOT NULL
)
;
DROP TABLE IF EXISTS "USERS";
CREATE TABLE "USERS" (
  "ID" VARCHAR(50) NOT NULL,
	"NAME" VARCHAR(50) NOT NULL,
	"USERNAME" VARCHAR(50) NOT NULL,
	"PASSWORD" VARCHAR NOT NULL,
	"EMAIL" VARCHAR(50) NOT NULL,
	"DOB" VARCHAR(50) NOT NULL,
	"PERMISSION" VARCHAR(100) NOT NULL,
	PRIMARY KEY ("ID")
)
;



ALTER TABLE "CASTS" ADD PRIMARY KEY ("ID") WITH (fillfactor=10);
ALTER TABLE "MOVIES" ADD PRIMARY KEY ("ID") WITH (fillfactor=10);
ALTER TABLE "CASTS_OF_MOVIES" ADD CONSTRAINT "PK__MOV" PRIMARY KEY ("IDMOVIE","IDCAST") WITH (fillfactor=10);
ALTER TABLE "REVIEWS" ADD CONSTRAINT "PK__REV" PRIMARY KEY ("IDMOVIE","AUTHOR") WITH (fillfactor=10);


ALTER TABLE "CASTS_OF_MOVIES" ADD FOREIGN KEY ("IDCAST") REFERENCES "CASTS" ("ID");
ALTER TABLE "CASTS_OF_MOVIES" ADD FOREIGN KEY ("IDMOVIE") REFERENCES "MOVIES" ("ID");
ALTER TABLE "REVIEWS" ADD FOREIGN KEY ("IDMOVIE") REFERENCES "MOVIES" ("ID");
